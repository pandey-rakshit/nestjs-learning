# Providers

- Providers are a fundamental concept in Nest.

- The main idea of a provider is that it can be injected as a dependency

- The only new feature is that it uses the `@Injectable()` decorator. The `@Injectable()` decorator attaches metadata, which declares that `Service or Provider` is a class that can be managed by the Nest IoC container.

```ts
//  service (provider)

import { Injectable } from '@nestjs/common';
import { Cat } from './interfaces/cat.interface';

@Injectable()
export class CatsService {
  private readonly cats: Cat[] = [];

  create(cat: Cat) {
    this.cats.push(cat);
  }

  findAll(): Cat[] {
    return this.cats;
  }
}
```

## Dependency injection

- Nest is built around the strong design pattern commonly known as Dependency injection

- Dependency injection, or DI, is one of the fundamental concepts in Angular

- Two main roles exist in the DI system: dependency consumer and dependency provider.

Angular facilitates the interaction between dependency consumers and dependency providers using an abstraction called `Injector`. When a dependency is requested, the injector checks its registry to see if there is an instance already available there. If not, a new instance is created and stored in the registry.

## Scopes

- Providers normally have a lifetime ("scope") synchronized with the application lifecycle.
- When the application is bootstrapped, every dependency must be resolved, and therefore every provider has to be instantiated.
- Similarly, when the application shuts down, each provider will be destroyed.

## Custom Providers

- Nest has a built-in `inversion of control ("IoC") container` that resolves relationships between providers.

- This feature underlies the `dependency injection` feature

- There are several ways to define a provider: you can use plain values, classes, and either asynchronous or synchronous factories

This is how our directory structure should look now:

```diagram

// Updated folder structure

src
├── cats
│    ├── dto
|    |    └── create-cat.dto.ts
|    ├── interfaces
|    |    └── cat.interface.ts
|    ├──  cat.controllers.ts
|    └──  cat.services.ts
├── app.module.ts
└── main.ts

```
